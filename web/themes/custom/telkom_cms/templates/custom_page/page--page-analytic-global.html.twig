{#
/**
 * @file
 * Theme override to display a single page.
 *
 * @see template_preprocess_page()
 * @see html.html.twig
 */
#}
<!-- Sidebar-->
{{page.sidebar_menu}}

<!-- Page content wrapper-->
<div class="content-wrapper">

    <!-- topbar start -->
      <header class="navbar navbar-light navbar-expand-md bg-white sticky-top shadow-sm px-4">
        <!-- button toggled sidenav start -->
        <button class="navbar-toggler border-0" type="button" id="sidebarToggle">
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- button toggled sidenav end -->
        <!-- navbar brand start -->
        {{page.title}}
        <!-- navbar brand start -->
        <ul class="navbar-nav ms-auto">
          {% if logged_in %}
            <li class="nav-item dropdown dropdown-notification">
                <a href="#" class="nav-link pe-3" id="notification" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="nav-notification">
                    <img src="{{ url('<front>')|render }}themes/custom/telkom_cms/assets/icons/ic-bell-new.svg" alt="">
                </div>
                <span class="badge badge-danger rounded-circle noti-icon-badge">{{unread_notification}}</span>
                </a>
                <div class="dropdown-menu notification-menu dropdown-menu-end animate slideIn"
                aria-labelledby="navbarDropdown">
                    {% for notif in notification %}
                        <a class="dropdown-item" href="{{notif.url}}">
                            {% if notif.is_read %}
                                {{notif.title}}
                            {% else %}
                                <b>{{notif.title}}</b>
                            {% endif %}
                        </a>
                        <div class="dropdown-divider"></div>
                        {% if loop.last %}
                            <a class="dropdown-item text-center text-primary" href="{{base_url}}/notification">Lihat Semua</a>
                        {% endif %}
                    {% endfor %}

                    {% if notification is empty %}
                        <a class="dropdown-item text-center" href="#">There is no notification</a>
                    {% endif %}
                </div>
            </li>
          {% endif %}

          {{page.user_navigation}}          
          
        </ul>
      </header>
      <!-- topbar end -->

      <!-- breadcrumb start -->
      {{page.breadcrumb}}
      <!-- breadcrumb end -->

      {{page.content.messages}}

      <!-- content start -->
      <div class="container-fluid px-4 mb-5">
        <div class="card px-4 py-3">

          {% macro tableList(dataTable) %}
            <table class="table">
              <thead class="table-secondary">
                  <tr>
                      <th scope="col">No.</th>
                      {% for column in dataTable.header %}
                          <th scope="col">{{column}}</th>
                      {% endfor %}
                  </tr>
              </thead>
              <tbody>
                {% if dataTable.data is empty %}
                  <tr>
                    <td class="views-field views-field-no" colspan="{{ dataTable.header|length + 1 }}">No data</td>
                  </tr>
                {% endif %}

                {% for row in dataTable.data %}
                  <tr>
                    <td class="views-field views-field-no">{{loop.index}}</td>
                    {% for key, column in dataTable.header %}
                      <th scope="col">{{row[key]}}</th>
                    {% endfor %}
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          {% endmacro %}

          <div class="analytic-group">
            <h3 class="node__title">
              <span>Top website visitor</span>
            </h3>
            <div class="analytic-content">
              {{_self.tableList(topWebVisitor)}}
            </div>
          </div>
          <div class="analytic-group">
            <h3 class="node__title">
              <span>Top page visitor</span>
            </h3>
            <div class="analytic-content">
              {{_self.tableList(topPageVisitor)}}
            </div>
          </div>
          <div class="analytic-group">
            <h3 class="node__title">
              <span>Top visit duration</span>
            </h3>
            <div class="analytic-content">
              {{_self.tableList(topVisitDuration)}}
            </div>
          </div>

        </div>
      </div>
</div>