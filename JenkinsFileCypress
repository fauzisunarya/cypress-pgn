import groovy.json.JsonOutput


pipeline{
    agent any

    options{
        ansiColor('xterm')
    }

    stages{
        stage('Build'){
            steps{
                bat "npm config set legacy-peer-deps true"
                bat "npm i"
                script{
                    env.JAVA_HOME ='C:/sdk/jdk-11.0.17'
                }
            }
        }
        stage('Generate Allure Report'){
            steps{
                script{
      	            msTeamsNotifier webhookURL: 'YOUR_WEBHOOK_URL', title: JOB_NAME, branchName: GIT_BRANCH, commitId: GIT_COMMIT.substring(0, 7), description: 'This is job test', result: currentBuild.currentResult, webUrl: 'https://www.jenkins.io/', jobLink: BUILD_URL, buildNumber: currentBuild.number, timeZone: 'Asia/Bangkok'
                    allure includeProperties: false, jdk: '', results: [[path: 'allure-results']]

                }
            }
        }
    }
}
